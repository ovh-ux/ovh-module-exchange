<div class="container-fluid px-0" data-ng-controller="ExchangeTabTasksCtrl as ctrl">
    <div class="text-center" data-ng-if="ctrl.tableLoading">
        <oui-spinner class="d-inline-block" size="l"></oui-spinner>
    </div>

    <div data-ng-if="!ctrl.tableLoading">
        <div class="alert alert-warning" role="alert"
             data-ng-if="ctrl.tasksList.list.messages.length > 0">
            <div>
                <strong data-i18n-static="exchange_tab_TASKS_warning"></strong>
                <span data-i18n-static="exchange_tab_TASKS_partial"></span>
            </div>
        </div>

        <div class="alert alert-info" role="alert"
             data-i18n-static="exchange_tab_TASKS_table_empty"
             data-ng-if="ctrl.tasksList.list.results.length === 0">
        </div>

        <div class="table-responsive">
            <table class="table table-hover"
                   data-ng-if="ctrl.tasksList.list.results.length > 0">
                <thead>
                    <tr>
                        <th scope="col" data-i18n-static="exchange_tab_TASKS_table_function"></th>
                        <th class="text-center" scope="col" data-i18n-static="exchange_tab_TASKS_table_state"></th>
                        <th scope="col" data-i18n-static="exchange_tab_TASKS_table_start_date"></th>
                        <th scope="col" data-i18n-static="exchange_tab_TASKS_table_finish_date"></th>
                    </tr>
                </thead>
                <tbody>
                    <tr data-ng-repeat="task in (ctrl.tasksList.list.results | orderBy:'todoDate':true) track by $index"
                        data-ng-if="task.function">
                        <td data-ng-bind-html="tr('exchange_tab_TASKS_'+ task.function)"></td>
                        <td class="text-center">
                            <span class="fa fa-lg" title="{{tr('exchange_tab_TASKS_'+ task.status)}}"
                                  data-ng-class="{
                                    'fa-hourglass-half text-info': task.status === ctrl.states.doing || task.status === ctrl.states.todo,
                                    'fa-times-circle text-danger': task.status === ctrl.states.error,
                                    'fa-ban text-danger': task.status === ctrl.states.cancelled}"
                                  data-ng-if="task.status === ctrl.states.doing || task.status === ctrl.states.todo || task.status === ctrl.states.error || task.status === ctrl.states.cancelled"></span>
                            <span data-ng-bind="tr('exchange_tab_TASKS_'+ task.status)"
                                  data-ng-if="task.status === ctrl.states.done"></span>
                        </td>
                        <td data-ng-bind="::task.todoDate | date:'short'"></td>
                        <td data-ng-bind="::task.finishDate | date:'short'"></td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <div class="clearfix"
         data-ng-show="!ctrl.tableLoading && ctrl.tasksList.list.results.length > 0"
         data-pagination-server-side="tasksTable"
         data-pagination-server-side-function="retrieveTasks"
         data-pagination-server-side-paginated-stuff="ctrl.tasksList"
         data-pagination-server-side-table-loading="ctrl.tableLoading">
    </div>
</div>
